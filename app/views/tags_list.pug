extends layout

block content
  .container
    h1.title Tags & Categories
    
    .tags-container
      .tags-list
        each tag in tags
          a.tag(href=`/tags?tag=${tag.name}`, class=selectedTag === tag.name ? 'active' : '')
            span.tag-name= tag.name
            span.tag-count= tag.ride_count
    
    if selectedTag
      h2.subtitle Rides with tag: #{selectedTag}
      
      if taggedRides.length > 0
        .rides-grid
          each ride in taggedRides
            .ride-card
              .ride-header
                h3.ride-title= ride.title
                .ride-meta
                  span.ride-date= new Date(ride.departure_time).toLocaleDateString()
                  span.ride-time= new Date(ride.departure_time).toLocaleTimeString()
              
              .ride-details
                .ride-route
                  span.route-from= ride.from_location
                  span.route-arrow â†’
                  span.route-to= ride.to_location
                
                .ride-driver
                  if ride.driver_name
                    span.driver-label Driver:
                    span.driver-name= ride.driver_name
                
                .ride-seats
                  span.seats-label Available Seats:
                  span.seats-count= ride.available_seats
              
              .ride-actions
                a.btn.btn-primary(href=`/rides/${ride.id}`) View Details
      else
        p.no-rides No rides found with this tag. 